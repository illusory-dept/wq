primes:{[x]
  p: til[x + 1;] > 1
  limit: floor[sqrt[x;];]
  i: 2

  W[i <= limit;
    $.[p[i];
      j: i * i
      W[j <= x;
        p[j]: false;
        j: j + i;
      ];
    ];
    i: $[i = 2; 3; i + 2;]
  ];
  where[p;]
}

echo[primes[999;];]
